# MySQL高级

## 1. 索引

### 1.1 索引概述

MySQL官方对索引的定义为：索引(index)是帮助MySQL高效获取数据的数据结构(有序)。在数据之外，数据库系统还维护着满足特定查找算法的数据结构，这些数据结构以某种方式引用(指向)数据，这样就可以在这些数据结构上实现高级查找算法，这种数据结构就是索引。如下面的示意图所示：

![image-20210701094359037](/Users/liuxiangren/mysql-learning/senior-img/index-brief.png)

```markdown
#左侧是没有建立索引的数据，Col1为序号，Col2为ID
问题1：假设我们要查找ID为34的这条数据
那么，搜索是自上而下的，第一次就搜索到了要找的数据
问题2：假设我们要查找ID为91的这条数据
那么，搜索是自上而下的，第四次才能搜索到要找的数据
问题3：假设我们要查找ID为3的这条数据
那么我们得一直搜索到最底部才能找到我们想要的数据
问题4：假设我们一张表中有500W条数据，那假设我们要找的数据就是在最后一个
可想而知，这样查找的话，效率是非常慢的

#右侧是建立了索引的数据
问题1：那么当数据插入的时候，就会按照ID值进行排序插入到二叉树中，也就是会进行对比。查找的时候，就会进行快速查找(二分查找)
```

左边是数据表，一共有两列七条记录，最左边的是数据记录的物理地址(注意逻辑上相邻的记录在磁盘上也并不是一定物理相邻的)。为了加快Col2的查找，可以维护一个右边所示的二叉查找树，每个节点分别包含索引值和一个指向对应数据记录物理地址的指针，这样就可以运用二叉查找快速获取到相应的数据。

一般来说索引本身也很大，不可能全部存储在内存中，因此索引往往以索引文件的形式存储在磁盘上。索引是数据库中用来提高性能的最常用的工具。

### 1.2 索引优势劣势

优势

1. 类似于书籍的目录索引，提高数据检索的效率，降低数据库的IO成本
2. 通过索引列对数据进行排序，降低数据排序的成本，降低CPU的消耗。



### 1.10 索引相关参考连接

MySQL索引总结：https://zhuanlan.zhihu.com/p/29118331



